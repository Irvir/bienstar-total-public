<!DOCTYPE html>
<html lang="en">
<script src="/frontEnd/src/controllers/Error404.js"></script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BienStarTotal</title>
    <!-- CSS Global -->
    <link rel="stylesheet" href="Base.css">
    <!-- CSS Específico -->
    <link rel="stylesheet" href="Login.css">

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const usuario = localStorage.getItem("usuario");
            if (usuario) {
                // Si ya hay sesión, redirigir automáticamente al perfil
                window.location.href = "perfil.html";
            }
        });
    </script>
</head>
<body>
    <script src="/frontEnd/src/controllers/loader.js"></script>
    <div id="contenedorPrincipal">
        <!-- Encabezado -->
        <div id="encabezado">
            <div class="header-inner">
                <div class="logo">
                    <a onclick="showLoaderAndRedirect('index.html')">
                        <img src="../../Imagenes/Login_Perfil/Logo.png" alt="Logo BienStarTotal" class="logoImg">
                    </a>
                </div>
                <div class="menúBotones">
                    <button class="btnMenu" onclick="showLoaderAndRedirect('index.html')">Inicio</button>
                    <button class="btnMenu" onclick="showLoaderAndRedirect('alimentos.html')">Alimentos</button>
                    <button class="btnMenu" onclick="showLoaderAndRedirect('dietas.html')">Dietas</button>
                    <button class="btnMenuNoti">
                        <img src="/frontEnd/Imagenes/Login_Perfil/Notificacion.png" id="btnNotification">
                    </button>
                </div>
                <div class="login">
                    <div style="float: left; height: 100%; width: 75%;" onclick="showLoaderAndRedirect('login.html')">
                        <button class="btnPerfilView" id="btnPerfilView">
                            <span class="nameUser">Nombre de Usuario</span>
                        </button>
                    </div>
    
                    <!-- Imagen Usuario -->
                    <div style="float: left; width: 10%; height: 100%;">
                        <img src="/frontEnd/Imagenes/Login_Perfil/UserPerfil.png" id="fotoUsuario" alt="Foto de Usuario"
                            style="cursor:pointer;" onclick="showLoaderAndRedirect('login.html')">
                    </div>
                </div>
            </div>
        </div>

        <!-- CUERPO -->
        <div id="cuerpo" class="fondoLogin">
            <div id="contenedorLoginAsist">
                <div id="contenedorLogin">
                    <div id="contenedorLoginFoto"></div>

                    <div class="login-container">
                        <form id="LoginForm">
                            <input type="text" id="email" placeholder="Correo electrónico" required>
                            <input type="password" id="password" placeholder="Contraseña" required>
                            <br><br>
                            <button type="submit" id="botonIngresar">Ingresar</button>

                            <!-- Animación de carga -->
                            <div id="loading-animation">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>

                            <br><br>
                            <button type="button" onclick="showLoaderAndRedirect('CrearCuenta.html')" id="BtnCrearCuenta">Crear Cuenta</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- PIE DE PÁGINA -->
        <div id="pie">
            <div class="footer-inner">
                <button class="instaBoton"></button>
                <button class="faceBoton"></button>
                <button class="youTubeBoton"></button>
                <button class="whatsBoton"></button>
            </div>
        </div>

        <script>
            document.getElementById('BtnCrearCuenta').addEventListener('click', () => {
                window.location.href = 'CrearCuenta.html';
            });

            // Menú desplegable
            document.addEventListener("DOMContentLoaded", () => {
                const btnPerfilView = document.getElementById("btnPerfilView");
                const menuDesplegable = document.getElementById("menuDesplegable");
                const logoutButton = document.getElementById("logoutButton");
                const fotoUsuario = document.getElementById("fotoUsuario");

                menuDesplegable.style.position = "absolute";
                menuDesplegable.style.top = "8%";
                menuDesplegable.style.right = "8%";
                menuDesplegable.style.display = "none";
                menuDesplegable.style.width = "10%";

                btnPerfilView.addEventListener("click", () => {
                    menuDesplegable.style.display = (menuDesplegable.style.display === "block") ? "none" : "block";
                });

                logoutButton.addEventListener("click", () => {
                    localStorage.removeItem("usuario");
                    window.location.href = "login.html";
                });

                fotoUsuario.addEventListener("click", () => {
                    window.location.href = "login.html";
                });

                document.addEventListener("click", (event) => {
                    if (!btnPerfilView.contains(event.target) &&
                        !menuDesplegable.contains(event.target) &&
                        !fotoUsuario.contains(event.target)) {
                        menuDesplegable.style.display = "none";
                    }
                });
            });
        </script>
        <script src="/frontEnd/src/controllers/notify.js"></script>

        <!-- Cargar tu Login.js real que maneja el login y animación -->
        <script src="/frontEnd/src/controllers/Login.js"></script>

    </div>

    <!-- Pantalla de carga -->
    <div id="loader">
        <span class="loader-text">Cargando</span>
        <div class="loader-dots"></div>
    </div>

</body>

</html>